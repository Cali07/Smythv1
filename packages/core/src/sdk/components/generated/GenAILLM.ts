//!!! DO NOT EDIT THIS FILE, IT IS AUTO-GENERATED !!!//

import { AgentMaker, ComponentWrapper, createSafeAccessor } from '../../sdk.index';
import { ComponentInput } from '../../types/SDKTypes';

export interface TGenAILLMSettings {
    name?: string;
    model: string;
    /** Prompt */
    prompt?: string;
    /** Temperature */
    temperature?: number;
    /** Maximum Tokens */
    maxTokens?: number;
    /** Maximum Thinking Tokens */
    maxThinkingTokens?: number;
    /** Stop Sequences */
    stopSequences?: string;
    /** Top P */
    topP?: number;
    /** Top K */
    topK?: number;
    /** Frequency Penalty */
    frequencyPenalty?: number;
    /** Presence Penalty */
    presencePenalty?: number;
    /** Response Format */
    responseFormat?: 'json' | 'text';
    /** Passthrough */
    passthrough?: boolean;
    /** Use System Prompt */
    useSystemPrompt?: boolean;
    /** Use Context Window */
    useContextWindow?: boolean;
    /** Maximum Context Window Length */
    maxContextWindowLength?: number;
}

export type TGenAILLMInputs = {
    /** An input that you can pass to the LLM */
    Input?: any;
    /** An attachment that you can pass to the LLM */
    Attachment?: any;
    [key: string]: any;
};

export function GenAILLM(settings?: TGenAILLMSettings, agentMaker?: AgentMaker) {    
    const { name, ...settingsWithoutName } = settings || {};
    const dataObject: any = { 
        name: settings?.name || 'GenAILLM', 
        settings: {
            ...settingsWithoutName 
        }
    };
    const component = new ComponentWrapper(dataObject, agentMaker);

    if (agentMaker) {
        agentMaker.structure.components.push(component);
    }
    
    const _out: { Reply: any; [key: string]: any } = {
        Reply: createSafeAccessor({}, component, 'Reply', {"default":true}),
    };

    const _in: { [key: string]: ComponentInput } = {
        Input: {
            component,
            type: 'Any',
            optional: false,
            default: false,
        },
        Attachment: {
            component,
            type: 'Binary',
            optional: true,
            default: false,
        },
    };

    dataObject.outputs = _out;
    dataObject.inputs = _in;

    component.inputs(_in);

    const wrapper = {
        out: _out,        
        in: component.inputs.bind(component) as (inputs: TGenAILLMInputs) => void,
    };

    return wrapper;
}
